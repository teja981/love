<!DOCTYPE html>
<html lang="en">
<head>

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>My Valentine üíñ</title>

<link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Poppins&display=swap" rel="stylesheet">

<style>

/* RESET */

*{
  margin:0;
  padding:0;
  box-sizing:border-box;
  font-family:Poppins;
}

body{
  background:linear-gradient(135deg,#3a0000,#120000,#4b0010);
  color:white;
  height:100vh;
  overflow:hidden;
}

/* SCREENS */

.screen{
  position:absolute;
  width:100%;
  height:100%;
  display:none;
  justify-content:center;
  align-items:center;
  flex-direction:column;
  text-align:center;
  padding:20px;
}

.active{display:flex;}

/* COMMON */

.title{
  font-family:'Great Vibes';
  font-size:3.2rem;
  margin-bottom:15px;
}

.heart{
  font-size:70px;
  animation:pulse 1.5s infinite;
}

@keyframes pulse{
  0%,100%{transform:scale(1)}
  50%{transform:scale(1.2)}
}

/* BUTTONS */

.btns{
  display:flex;
  gap:20px;
  margin-top:25px;
}

button{
  padding:12px 30px;
  border:none;
  border-radius:25px;
  cursor:pointer;
  font-size:16px;
  transition:0.3s;
}

button:hover{
  transform:scale(1.1);
}

.yes{
  background:#ff2f68;
  color:white;
}

.no{
  background:#222;
  color:white;
}

/* CARDS */

.card{
  background:rgba(255,255,255,0.1);
  padding:25px;
  border-radius:15px;
  max-width:450px;
  backdrop-filter:blur(10px);
  box-shadow:0 0 20px rgba(255,0,120,0.3);
}

.counter{
  background:rgba(0,0,0,0.6);
  padding:12px 25px;
  border-radius:25px;
  margin-top:20px;
}

.photo{
  width:220px;
  height:220px;
  border-radius:20px;
  object-fit:cover;
  display:none;
  margin-top:20px;
  border:3px solid hotpink;
  box-shadow:0 0 25px hotpink;
}

/* PAGE 1 STYLE */

#s1{
  background:radial-gradient(circle,#500010,#120000);
}

#s1 .title{
  animation:fadeDown 2s;
}

@keyframes fadeDown{
  from{opacity:0;transform:translateY(-50px)}
  to{opacity:1}
}

/* PAGE 2 STYLE */

#s2{
  background:linear-gradient(45deg,#2b0000,#4b0010);
}

#s2 .counter{
  animation:glowBox 2s infinite alternate;
}

@keyframes glowBox{
  from{box-shadow:0 0 10px pink}
  to{box-shadow:0 0 25px hotpink}
}

/* PAGE 3 STYLE */

#s3{
  background:radial-gradient(circle,#3b0015,#100005);
}

#s3 .card{
  animation:floatCard 3s ease-in-out infinite;
}

@keyframes floatCard{
  0%,100%{transform:translateY(0)}
  50%{transform:translateY(-15px)}
}

/* PAGE 4 STYLE */

#s4{
  background:linear-gradient(to bottom,#30000a,#120000);
}

#s4 .title{
  text-shadow:0 0 20px hotpink;
}

/* FINAL PAGE */

.final-name{
  font-family:'Great Vibes';
  font-size:3.5rem;
  animation:glow 2s infinite alternate;
}

@keyframes glow{
  from{color:#ff9dcf}
  to{color:#ff2f68}
}

.slideshow{
  width:220px;
  height:220px;
  border-radius:15px;
  overflow:hidden;
  border:2px solid hotpink;
  margin:15px;
}

.slideshow img{
  width:100%;
  height:100%;
  object-fit:cover;
}

.forever{
  background:rgba(0,0,0,0.5);
  padding:12px 25px;
  border-radius:25px;
  margin:10px;
}

/* WHATSAPP */

.wa{
  position:fixed;
  bottom:20px;
  right:20px;
  background:#25D366;
  color:white;
  padding:12px 18px;
  border-radius:30px;
  border:none;
}

/* FLOATING HEARTS */

.float{
  position:absolute;
  animation:float 6s linear infinite;
}

@keyframes float{
  0%{transform:translateY(100vh);opacity:0}
  50%{opacity:1}
  100%{transform:translateY(-100vh);opacity:0}
}

/* CONFETTI */

.confetti{
  position:absolute;
  animation:fall 4s linear infinite;
}

@keyframes fall{
  0%{top:-10%}
  100%{top:110%}
}

</style>
</head>

<body>

<audio id="musicPlayer" loop></audio>

<!-- PAGE 1 -->

<div class="screen active" id="s1">

  <div class="heart">‚ù§Ô∏è</div>

  <div class="title">Will You Be My Valentine?</div>

  <h3 id="name1"></h3>

  <div class="btns">
    <button class="yes" onclick="next(2)">YES üíñ</button>
    <button class="no" onclick="move(this)">NO üòú</button>
  </div>

</div>

<!-- PAGE 2 -->

<div class="screen" id="s2">

  <div class="heart">üíñ</div>

  <div class="title">Our Love Story</div>

  <h3 id="name2"></h3>

  <div class="counter" id="count"></div>

  <button class="yes" onclick="next(3)">Open üíå</button>

</div>

<!-- PAGE 3 -->

<div class="screen" id="s3">

  <div class="heart">üíò</div>

  <div class="title">From My Heart</div>

  <div class="card">
    <p id="msg"></p>
  </div>

  <img id="photo" class="photo">

  <button class="yes" onclick="next(4)">Proposal üíç</button>

</div>

<!-- PAGE 4 -->

<div class="screen" id="s4">

  <div class="heart">üíç</div>

  <div class="title">Will You Marry Me?</div>

  <img id="photo2" class="photo">

  <button class="yes" onclick="next(5)">YES üíñ</button>

</div>

<!-- PAGE 5 (ORIGINAL AMAZING PAGE) -->

<div class="screen" id="s5">

  <h1 id="finalName" class="final-name"></h1>

  <div class="heart">üíñüíçüíñ</div>

  <h2>Thank You For Accepting Me ‚ù§Ô∏è</h2>

  <p>You Are My Forever üíï</p>

  <div class="slideshow">
    <img id="slideImg">
  </div>

  <div class="forever" id="foreverTimer"></div>

  <button class="yes" onclick="recordVideo()">
    üé• Download Memory
  </button>

</div>

<button class="wa" id="waBtn">üíö WhatsApp</button>

<script>

/* DATA */

const params = new URLSearchParams(location.search);

const name = params.get("name") || "My Love";
const since = params.get("since") || "2024-01-01";
const msg = params.get("msg") || "You are my everything ‚ù§Ô∏è";
const photoData = params.get("photo");
const musicData = params.get("music");

/* SET */

name1.innerText = name + " ‚ù§Ô∏è";
name2.innerText = name + " ‚ù§Ô∏è";
document.getElementById("msg").innerText = msg;

/* MUSIC */

if(musicData){
  musicPlayer.src = musicData;
}

document.body.addEventListener("click",()=>{
  musicPlayer.play().catch(()=>{});
},{once:true});

/* COUNTER */

const start = new Date(since);

function counter(){

  const now = new Date();

  const d = Math.floor((now-start)/86400000);

  count.innerText = "Together: "+d+" Days ‚ù§Ô∏è";
}

counter();

setInterval(counter,60000);

/* PHOTOS */

if(photoData){

  photo.src = photoData;
  photo.style.display="block";

  photo2.src = photoData;
  photo2.style.display="block";
}

/* SCREEN */

function next(n){

  document.querySelectorAll(".screen")
  .forEach(s=>s.classList.remove("active"));

  document.getElementById("s"+n)
  .classList.add("active");

  fire();

  if(n===5) initFinal();
}

/* NO BUTTON */

function move(b){

  b.style.position="absolute";

  b.style.left=Math.random()*80+"vw";
  b.style.top=Math.random()*80+"vh";
}

/* FLOAT HEARTS */

setInterval(()=>{

  const h = document.createElement("div");

  h.className="float";
  h.innerText="‚ù§Ô∏è";

  h.style.left=Math.random()*100+"vw";

  document.body.appendChild(h);

  setTimeout(()=>h.remove(),6000);

},400);

/* CONFETTI */

function fire(){

  for(let i=0;i<25;i++){

    const c = document.createElement("div");

    c.className="confetti";
    c.innerText="üíñ";

    c.style.left=Math.random()*100+"vw";

    document.body.appendChild(c);

    setTimeout(()=>c.remove(),4000);
  }
}

/* FINAL */

function initFinal(){

  finalName.innerText="üíñ "+name+" üíñ";

  musicPlayer.volume=0.3;
  musicPlayer.play();

  startSlide();
  forever();

  setInterval(forever,1000);
}

/* TIMER */

function forever(){

  const now=new Date();

  let d=Math.floor((now-start)/1000);

  let days=Math.floor(d/86400); d%=86400;
  let h=Math.floor(d/3600); d%=3600;
  let m=Math.floor(d/60);
  let s=d%60;

  foreverTimer.innerText=
  `${days} Days ${h}h ${m}m ${s}s Together ‚ù§Ô∏è`;
}

/* SLIDESHOW */

function startSlide(){

  if(!photoData) return;

  slideImg.src=photoData;
}

/* RECORD */

let recorder,chunks=[];

async function recordVideo(){

  const stream =
  await navigator.mediaDevices.getDisplayMedia({
    video:true,
    audio:true
  });

  recorder=new MediaRecorder(stream);

  recorder.ondataavailable=e=>chunks.push(e.data);

  recorder.onstop=()=>{

    const blob=new Blob(chunks,{type:"video/webm"});

    const url=URL.createObjectURL(blob);

    const a=document.createElement("a");

    a.href=url;
    a.download="our_love_story.webm";
    a.click();

    chunks=[];
  };

  recorder.start();

  alert("Recording Started ‚ù§Ô∏è");
}

/* WHATSAPP */

waBtn.onclick=()=>{

  const text=
  "üíñ My Valentine For You ‚ù§Ô∏è\n\n"+
  location.href;

  window.open(
    "https://api.whatsapp.com/send?text="+
    encodeURIComponent(text),
    "_blank"
  );
};

</script>

</body>
</html>
